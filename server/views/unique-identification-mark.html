{% extends 'layout.html' %}
{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% from "govuk/components/fieldset/macro.njk" import govukFieldset %}
{% from "govuk/components/select/macro.njk" import govukSelect %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% block beforeContent %}
  {{ govukBackLink({
    text: backLinkButton,
    href: backLink,
	  attributes: {id: 'linkBack'}
  }) }}

  {% if errorList %}
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
        {{govukErrorSummary ({
        "titleText": errorSummaryTitle,
        "errorList": errorList
        }) }}
      </div>
    </div>
  {% endif %}

{% endblock %}
{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h2 class="govuk-heading-l moj-add-another__heading" tabindex="-1">{{pageHeader}}</h2>
      <p>You can add up to three marks. They must relate to the specimen you are completing this application for.</p>
      <form method="POST" autocomplete="off" novalidate="novalidate">
        <input type="hidden" id="numberOfMarks" name="numberOfMarks" min="1" value="{{ numberOfMarks }}">
        {% for mark in marks %}
          {% call govukFieldset(mark.fieldsetMark) %}
          {{ govukSelect(mark.selectUniqueIdentificationMarkType) }}
          {{ govukInput(mark.inputUniqueIdentificationMark) }}
          {% endcall %}
          {% if mark.showAddMarkButton %}
            {{ govukButton({
            text: "Add another mark",
            type: "submit",
            classes: "govuk-button--secondary govuk-!-margin-bottom-4",
            attributes: {
              formAction: formActionPage + '/addMark'
            }
          }) }}
          {% endif %}
            {% if mark.showRemoveMarkButton %}
            {{ govukButton({
            text: "Remove",
            type: "submit",
            classes: "govuk-button--secondary govuk-!-margin-bottom-4",
            attributes: {
              formAction: formActionPage + '/removeMark/' + mark.markIndex
            }
          }) }}
          {% endif %}
          
        {% endfor %}
        <br/>
        {{ govukButton({
          text: saveAndContinueButton,
          type: "submit",
          attributes: {
              formAction: formActionPage
            }
        }) }}

      </form>
    </div>
  </div>
{% endblock %}